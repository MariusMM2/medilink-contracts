<p class="page-title">Statistics</p>

<div class="container">
  <ng-container *ngIf=" !contracts && isLoading">
    <mat-spinner style="margin: auto; align-self: center;"></mat-spinner>
  </ng-container>
  <ng-container *ngIf="!contracts && !isLoading">
    <mat-card-title style="margin: auto; text-align: center;">Cannot retrieve contracts</mat-card-title>
  </ng-container>
</div>

<ng-container *ngIf="contracts">

  <mat-tab-group dynamicHeight mat-align-tabs="center">
    <mat-tab label="Date">
      <div class="example-large-box mat-elevation-z4">
        <div class="list">
          <h3>Contract Statistics - Date</h3>
          <p>
            <span>Current: </span>
            <span>{{statisticsDateCurrent}}</span>
          </p>
          <p>
            <span>Expired: </span>
            <span>{{statisticsDateExpired}}</span>
          </p>
          <p>
            <span>Not yet started: </span>
            <span>{{statisticsDateNotStarted}}</span>
          </p>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Cost">
      <div class="example-large-box mat-elevation-z4">
        <div class="list">
          <p>
            <span>Cheapest: </span>
          </p>
          <table>
            <tr>
              <th>name</th>
              <th>cost</th>
              <th>actions</th>
            </tr>
            <tr>
              <td>{{contracts[0].name.substring(0, 20)}}
                <span *ngIf="contracts[0].name.length > 20"> ... </span>
              </td>
              <td>{{contracts[0].cost}}</td>
              <td>
                <button class="showContract" mat-raised-button color="primary"
                        routerLink="/dashboard/contract-detail/{{contracts[0].id}}">Show Details
                </button>
              </td>
            </tr>
          </table>

          <p>
            <span>Most Expensive: </span>
          </p>
          <table>
            <tr>
              <th>Name</th>
              <th>Cost</th>
              <th>Actions</th>
            </tr>
            <tr>
              <td>{{contracts[contracts.length - 1].name}}</td>
              <td>{{contracts[contracts.length - 1].cost}}</td>
              <td>
                <button class="showContract" mat-raised-button color="primary"
                        routerLink="/dashboard/contract-detail/{{contracts[contracts.length-1].id}}">Show Details
                </button>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</ng-container>





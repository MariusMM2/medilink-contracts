<p class="page-title">Details</p>

<mat-card class="example-card">
  <ng-container *ngIf="contract && !isLoading">
    <mat-card-header>
      <div mat-card-avatar class="example-header-image"></div>
      <mat-card-title>{{contract.name}}</mat-card-title>
    </mat-card-header>

    <mat-divider></mat-divider>

    <mat-card-content>
      <p class="description">Description: {{contract.description}}</p>
      <p class="description">Start Date: {{contract.startDate | date: 'dd/MM/yyyy'}}</p>
      <p class="description">Expiration Date: {{contract.expirationDate | date: 'dd/MM/yyyy'}}</p>
      <p class="description">Type: {{contract.type}}</p>
      <p class="category">Category: {{contract.category}}</p>
      <p class="cost">Cost: {{contract.cost}}</p>
      <p class="location">Location: {{contract.location}}</p>
    </mat-card-content>

    <mat-divider></mat-divider>

    <mat-card-actions>
      <button class="updateContract" mat-raised-button color="accent"
              routerLink="/dashboard/contract-update/{{contract.id}}"
              *ngIf="currentUser.role == 'Admin' || currentUser.role == 'SuperAdmin'">Update Contract
      </button>
      <button class="deleteContract" mat-raised-button color="warn"
              *ngIf="currentUser.role == 'Admin' || currentUser.role == 'SuperAdmin'"
              (click)="deleteContract()">Delete Contract
      </button>
      <ng-container *ngIf="contract.driveRef !== undefined; then showButtons else showDisabledButtons"></ng-container>

      <ng-template #showButtons>
        <a class="updateContract" mat-raised-button color="primary"
           [href]="contract.driveRef.webUrl" target="_blank">Open
        </a>
        <a class="updateContract" mat-raised-button color="primary"
           [href]="contract.driveRef.downloadUrl" target="_blank">Download
        </a>
      </ng-template>
      <ng-template #showDisabledButtons>
        <a class="updateContract" mat-raised-button color="primary" disabled>Open</a>
        <a class="updateContract" mat-raised-button color="primary" disabled>Download</a>
      </ng-template>
    </mat-card-actions>
  </ng-container>

  <ng-container *ngIf=" !contract && isLoading">
    <mat-spinner style="margin: auto; align-self: center;"></mat-spinner>
  </ng-container>

  <ng-container *ngIf="!contract && !isLoading">
    <mat-card-title style="margin: auto; text-align: center;">Contract not found</mat-card-title>
  </ng-container>
</mat-card>
